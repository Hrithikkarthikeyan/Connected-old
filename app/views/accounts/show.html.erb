
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
$(".comment-post").hide();
function toggleComment(post_id){
  $(".comment-icon-post-"+post_id).toggle("fast");
}
</script>

<div class="container">
<h2> User details</h2>
<div class="card card-header results-block justify-content-md-center">
<table class="col-md-12">
  <tbody>

  <tr>
  <td><strong>Name: </strong> <%= @acc.full_name %></td>
  <td><strong>Email: </strong> <%= @acc.email %></td>
  
                        
  </tr>
</tbody>
</table>
</div>
<div class="container-fluid col-8"> 
<% if @acc == current_account || Friendship.where(account_id: current_account.id, friend_id: @acc.id).present? || Friendship.where(account_id: @acc.id, friend_id: current_account.id).present? || current_account.company? || @acc.company?%>
  <% @posts.each do |post| %>
    <div class="row justify-content-md-center">
      <div class="col-8 mt-4">
        <div class="card text-center shadow mb-5 bg-white rounded">
          <div class="card-header font-italic">
          <div class="bg-white p-2">
                  <div class="d-flex flex-row user-info">
                  <% if @acc.image.present? %>
                    <%= image_tag(@acc.image.variant(resize_to_fill: [40, 40]), class: "rounded-circle") %>
                  <% else %>
                    <%= image_tag ("empty_profile.jpeg"), class: "rounded-circle profile_pic"%>
                  <% end %>
                      <div class="d-flex flex-column justify-content-start ml-2"><span class="d-block font-weight-bold name"><%= link_to post.account.full_name, account_path(post.account) %></span><span class="date text-black-50"><%= time_ago_in_words(post.created_at) %></span></div>
                      <% if Account.find(post.account_id) == current_account%>
                    <div><%= link_to "Delete", post_path(post), class: "btn btn-outline-danger float-right delete-button-in-acc", method: :delete, data: {confirm: "Are you sure?"} %></div>
                      <% end %>
                  </div>
                </div>
          </div>
         <% if post.image.attached? %>
         <p>
          <%= image_tag post.image.variant(resize: "400x400") %>
         </p>
         <% end %>
          <div class="card-body">
            <p class="card-text"><%= truncate(post.description, length: 100) %></p>
            </div>
          <div class="d-flex justify-content-center row">
              <div class="col-md-12">
                  <div class="d-flex flex-column comment-section">
                      
                      <div class="card bg-white">
                          <div class="d-flex flex-row fs-12">
                              <!-- <div class="like p-2 cursor"><i class="fa fa-thumbs-o-up"><span class="ml-1"  >Like</span></i></div> -->
                              <div id="like-icon-post-<%= post.id.to_s%>">
                              <%= render "posts/like_icon", {is_liked: post.is_liked(current_account), post: post}%>
                              </div>
                              <div class="like p-3 cursor comment"><button onclick="toggleComment(<%= post.id.to_s%>)"><i class="fa fa-commenting-o"><span class="ml-1">Comment</span></i></button></div>
                              <div class="like p-3 cursor"><i class="fa fa-share"><span class="ml-1">Share</span></i></div>
                          </div>
                          <div id="like-text-post-<%= post.id.to_s %>">
                            <%= render "posts/like_text", {likes: post.likes}%>
                          </div>
                      </div>
                      <div class="comment-icon-post-<%= post.id.to_s%> comment-post">
                        <div class="container">
                        <div class="bg-light p-2">
                          <div class="row actions" id="comment-form-post-<%= post.id.to_s%>">
                            <%= render "posts/comment_form", {post: post}%>
                          </div>
                        </div>
                        </div>
                        <div id="comment-post-<%= post.id.to_s%>">
                          <%= render "posts/comment_list", {post: post}%>
                        </div>
                      </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
Please connect to view their posts
<% end %>
</div>
</div>




